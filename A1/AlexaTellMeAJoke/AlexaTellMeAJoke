from tkinter import *
from tkinter import messagebox
import random


def loadJokes(filename):
    jokes = []
    try:
        with open(filename, "r", encoding="utf-8") as file:
            for line in file:
                line = line.strip()
                if "?" in line:
                    joke, punchline = line.split("?", 1)
                    jokes.append((joke.strip() + "?", punchline.strip()))
        return jokes
    except FileNotFoundError:
        messagebox.showerror("Error", f"File '{filename}' not found!")
        root.destroy()
        return []


def showFrame(frame):
    frame.tkraise()


def showJoke():
    global current_joke
    if not jokes:
        joke_label.config(text="No jokes available!")
        return
    current_joke = random.choice(jokes)
    joke_label.config(text=current_joke[0])

def showPunchline():
    if current_joke:
        joke_label.config(text=current_joke[1])
    else:
        joke_label.config(text="Press 'Show Joke' first!")

def returnToMenu():
    joke_label.config(text="")
    showFrame(start_frame)


def startApp():
    showFrame(joke_frame)

def quitApp():
    root.destroy()

root = Tk()
root.title("Random Joke App")
root.geometry("1000x1000")

# Make frames stack on top of each other
root.rowconfigure(0, weight=1)
root.columnconfigure(0, weight=1)

# --- Load jokes ---
jokes = loadJokes("A1/AlexaTellMeAJoke/randomJokes.txt")
current_joke = None

# --- Start Menu Frame ---
start_frame = Frame(root)
start_frame.grid(row=0, column=0, sticky="nsew")

mainTitle =Label(start_frame, text="Welcome to the Joke App!", font=("Arial", 18, "bold")).pack(pady=40)
startButton = Button(start_frame, text="Start", width=20, height=2, command=startApp).pack(pady=10)
quitButton = Button(start_frame, text="Quit", width=20, height=2, command=quitApp).pack(pady=10)

# --- Joke Frame ---
joke_frame = Frame(root)
joke_frame.grid(row=0, column=0, sticky="nsew")

joke_label = Label(joke_frame, text="", wraplength=400, font=("Arial", 14))
joke_label.pack(pady=20)

jokeButton = Button(joke_frame, text="Show Joke", width=20, height=2, command=showJoke).pack(pady=5)
punchlineButton = Button(joke_frame, text="Show Punchline", width=20, height=2, command=showPunchline).pack(pady=5)
returnButton = Button(joke_frame, text="Return to Menu", width=20, height=2, command=returnToMenu).pack(pady=5)

# --- Show start menu first ---
showFrame(start_frame)

# --- Run the App ---
root.mainloop()
